(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd7e4"],{"822f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("TopArea"),a("Navbar"),a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.cart.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"1"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.order.total))])])])])])]),a("div",{staticClass:"my-5 row justify-content-center"},[a("ValidationObserver",{ref:"form"},[a("form",{staticClass:"col-md-12",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("ValidationProvider",{attrs:{name:"name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.failed,s=e.errors;return[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("*收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"username",name:"name",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),r?a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()])]}}])}),a("ValidationProvider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.failed,s=e.errors;return[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),r?a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()])]}}])}),a("ValidationProvider",{attrs:{name:"收件人電話",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.failed,s=e.errors;return[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),r?a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()])]}}])}),a("ValidationProvider",{attrs:{name:"收件人地址",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.failed;return[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),r?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()])]}}])}),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-block btn-lg btn-primary text-white my-3 rounded-0"},[t._v("送出訂單")])])],1)])],1),a("Footer"),a("Scrolltop")],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],o=(a("99af"),a("1566")),i=a("5378"),n=a("ab44"),l=a("c1c1"),c={data:function(){return{products:[],isLoading:!1,pagination:{},product:{},cart:{carts:{product:{}}},tempCart:{product:{title:""}},coupon_code:"",status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getOrder:function(){var t="".concat(Object({NODE_ENV:"production",BASE_URL:"/vue_shop_Backstage/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/vue_shop_Backstage/"}).VUE_APP_CUSTOMPATH,"/cart"),e=this;e.isLoading=!0,this.$http.get(t).then((function(t){e.isLoading=!1,e.cart=t.data.data,console.log(e.cart)}))},createOrder:function(){var t=this,e=this,a=e.form;e.isLoading=!0;var r="".concat(Object({NODE_ENV:"production",BASE_URL:"/vue_shop_Backstage/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/vue_shop_Backstage/"}).VUE_APP_CUSTOMPATH,"/order");this.$refs.form.validate().then((function(s){s?t.$http.post(r,{data:a}).then((function(t){console.log("訂單建立",t),t.data.success&&e.$router.push("/customer_checkorder/".concat(t.data.orderId)),e.isLoading=!1})):(console.log("欄位不完整"),e.isLoading=!1)}))}},created:function(){this.getOrder()},components:{Navbar:i["a"],TopArea:o["a"],Footer:n["a"],Scrolltop:l["a"]}},d=c,u=a("2877"),m=Object(u["a"])(d,r,s,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0dd7e4.28361540.js.map